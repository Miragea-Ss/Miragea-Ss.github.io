---
import Layout from '../../site-layouts/Layout.astro';
import ThoughtCard from '../../components/ThoughtCard.astro';
import { getCollection } from 'astro:content';

// 日本語記事のみを厳格にフィルタリング（Miragea美学：言語の純粋性を保つ）
const allThoughts = (await getCollection('thoughts'))
	.filter((post) => post.data.language === 'jp' || post.data.language === 'ja')
	.sort((a, b) => b.data.intuitionDate.valueOf() - a.data.intuitionDate.valueOf());
---

<Layout title="Miragea's Perception Archive" lang="ja">
	<main class="min-h-screen bg-black p-6 md:p-12">
		
		<!-- 巨大なタイトルエリア -->
		<header class="mb-24 mt-12 flex flex-col items-center justify-center text-center space-y-6">
			<h1 class="text-6xl md:text-8xl font-thin tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-800 animate-pulse">
				MIRAGEA
			</h1>
			<p class="text-gray-500 font-mono text-sm max-w-md">
				ARCHIVE OF SENSORY PROCESSING SENSITIVITY
				<br/>
				HUMAN READABLE / AI READABLE
			</p>
		</header>

		<!-- 思考の非対称グリッド表示（Miragea美学：不均等な配置、意図的なずれ） -->
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-7xl mx-auto px-4">
			{allThoughts.map((post, index) => {
				// 非対称な配置：特定のインデックスで幅を変える
				const isWide = index % 5 === 0;
				const marginOffset = index % 4 === 1 ? 'md:mt-12' : index % 4 === 3 ? 'md:mb-12' : '';
				return (
					<div class={`${isWide ? 'md:col-span-2' : ''} ${marginOffset} transition-all duration-700`}>
						<ThoughtCard post={post} />
					</div>
				);
			})}
		</div>

	</main>
</Layout>
