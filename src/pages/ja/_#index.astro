---
// src/pages/ja/index.astro
import Layout from '../../layouts/Layout.astro'; // ‚Äª„Éë„Çπ„ÅØÁí∞Â¢É„Å´Âêà„Çè„Åõ„Å¶Ë™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ
import ThoughtCard from '../../components/ThoughtCard.astro';
import InfiniteGallery from '../../components/InfiniteGallery.astro'; // üëà ËøΩÂä†
import { getCollection } from 'astro:content';

// Êó•Êú¨Ë™ûË®ò‰∫ã„ÅÆ„Åø„ÇíÂé≥Ê†º„Å´„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
const allThoughts = (await getCollection('thoughts'))
	.filter((post) => post.data.language === 'jp' || post.data.language === 'ja')
	.sort((a, b) => b.data.intuitionDate.valueOf() - a.data.intuitionDate.valueOf());
---

<Layout title="Miragea's Perception Archive" lang="ja">
	<main class="min-h-screen bg-black p-6 md:p-12">
		
		<!-- Â∑®Â§ß„Å™„Çø„Ç§„Éà„É´„Ç®„É™„Ç¢ÔºàÂÖÉ„ÅÆ„Åæ„ÅæÔºâ -->
		<header class="mb-24 mt-12 flex flex-col items-center justify-center text-center space-y-6">
			<h1 class="text-6xl md:text-8xl font-thin tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-800 animate-pulse">
				MIRAGEA
			</h1>
			<p class="text-gray-500 font-mono text-sm max-w-md">
				ARCHIVE OF SENSORY PROCESSING SENSITIVITY
				<br/>
				HUMAN READABLE / AI READABLE
			</p>
		</header>

		<!-- 1. ÊÄùËÄÉ„ÅÆÈùûÂØæÁß∞„Ç∞„É™„ÉÉ„ÉâË°®Á§∫ÔºàÂÖÉ„ÅÆ„Åæ„ÅæÔºâ -->
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-7xl mx-auto px-4 mb-32">
			{allThoughts.map((post, index) => {
				const isWide = index % 5 === 0;
				const marginOffset = index % 4 === 1 ? 'md:mt-12' : index % 4 === 3 ? 'md:mb-12' : '';
				return (
					<div class={`${isWide ? 'md:col-span-2' : ''} ${marginOffset} transition-all duration-700`}>
						<ThoughtCard post={post} />
					</div>
				);
			})}
		</div>

		<!-- 2. Êñ∞„Åó„ÅÑÁîªÂÉè„Ç¢„Éº„Ç´„Ç§„ÉñÔºà„Åì„Åì„Å´ËøΩÂä†ÔºÅÔºâ -->
		<section class="archive-section">
			<div class="separator">
				<span class="text-gray-600 font-thin text-xs tracking-widest">VISUAL ARCHIVE</span>
			</div>
			
			<!-- „Åì„Åì„Å´ÁÑ°Èôê„Çπ„ÇØ„É≠„Éº„É´„ÇÆ„É£„É©„É™„Éº„ÇíË°®Á§∫ -->
			<InfiniteGallery lang="ja" />
		</section>

	</main>
</Layout>

<style>
	/* Âå∫Âàá„ÇäÁ∑ö„ÅÆ„Çπ„Çø„Ç§„É´ */
	.separator {
		display: flex;
		align-items: center;
		justify-content: center;
		margin-bottom: 4rem;
	}
	.separator::before, .separator::after {
		content: "";
		flex: 1;
		border-bottom: 1px solid #333;
		margin: 0 2rem;
	}
</style>